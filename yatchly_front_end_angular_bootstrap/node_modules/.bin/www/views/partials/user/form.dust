{>"layouts/header"/}
<div ng-controller="UserController" {userdata.email}>	
	<form ng-app="myApp">
			<input ng-model="user.id" type="hidden" ng-init="user.userID ='{user.userID}'">
		<div class="form-group" >
			<label for="LabelName">Name</label>
			<input ng-model="user.name" type="text" class="form-control" placeholder="Name" ng-init="user.name ='{user.name}'">
		</div>
		  
		<div class="form-group">
			<label for="LabelEmail">Email</label>
			<input ng-model="user.email" type="text" class="form-control" aria-describedby="" placeholder="Email" ng-init="user.email ='{user.email}'">
		</div>
		  
		<div class="form-group">
			<label for="LabelPhoneNumber">Phone Number</label>
			<input ng-model="user.phoneNumber" type="text" class="form-control" aria-describedby="" placeholder="Phone Number" 
				ng-init="user.phoneNumber ='{user.phoneNumber}'">
		</div>
	  
		<div class="form-group">
			<label for="LabelAddress">Address</label>
			<input ng-model="user.address" type="text" class="form-control" aria-describedby="" placeholder="Address" ng-init="user.address ='{user.address}'">
		</div>
	  
	  <button type="button" ng-click="Save()" class="btn btn-primary">Submit</button>	  
	</form>
</div>


<script>
	var app = angular.module('myApp', []);	
	app.controller('UserController', function($scope, $http) {
	    $scope.Save = function() {	   
			//console.log($scope.user);		
			var postData = $scope.user;
			console.log(postData);
			//if (postData !== undefined) postData.email = postData.email == '' ? null : postData.email;
			var postURL = (postData.userID == '' ? 'http://127.0.0.1:3000/api/user/add' : 'http://127.0.0.1:3000/api/user/edit');
			console.log(postURL);
			$http({
				method : "POST",
				url: postURL,
				data: postData,
			  }).then(function mySuccess(response) {
				   var message = 'success';
				   console.log(response);
				   if (response.data.status != 'success') message = response.data.messages.join("<br>");
				   
				   $("#myModal .modal-body").html(message);
				   $("#myModal").modal();
				}, function myError(response) {
				  console.log(response.statusText);
			 });
	   }
	   /*
		   $scope.OnLoad = function() {
			$http({
					method : "GET",
					url: 'http://127.0.0.1:3000/api/user',
				  }).then(function mySuccess(response) {
					  $scope.rows = response.data.data;
					  console.log($scope.rows); 
					}, function myError(response) {
					  console.log(response.statusText);
				 });
		  }
	  */
	});
</script>

{>"layouts/footer"/}